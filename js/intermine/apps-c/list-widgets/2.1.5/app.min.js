!function(){var a=function(b,c,d){var e=a.resolve(b);if(null==e){d=d||b,c=c||"root";var f=new Error('Failed to require "'+d+'" from "'+c+'"');throw f.path=d,f.parent=c,f.require=!0,f}var g=a.modules[e];if(!g._resolving&&!g.exports){var h={};h.exports={},h.client=h.component=!0,g._resolving=!0,g.call(this,h.exports,a.relative(e),h),delete g._resolving,g.exports=h.exports}return g.exports};a.modules={},a.aliases={},a.resolve=function(b){"/"===b.charAt(0)&&(b=b.slice(1));for(var c=[b,b+".js",b+".json",b+"/index.js",b+"/index.json"],d=0;d<c.length;d++){var b=c[d];if(a.modules.hasOwnProperty(b))return b;if(a.aliases.hasOwnProperty(b))return a.aliases[b]}},a.normalize=function(a,b){var c=[];if("."!=b.charAt(0))return b;a=a.split("/"),b=b.split("/");for(var d=0;d<b.length;++d)".."==b[d]?a.pop():"."!=b[d]&&""!=b[d]&&c.push(b[d]);return a.concat(c).join("/")},a.register=function(b,c){a.modules[b]=c},a.alias=function(b,c){if(!a.modules.hasOwnProperty(b))throw new Error('Failed to alias "'+b+'", it does not exist');a.aliases[c]=b},a.relative=function(b){function c(a,b){for(var c=a.length;c--;)if(a[c]===b)return c;return-1}var d=a.normalize(b,".."),e=function(c){var d=e.resolve(c);return a(d,b,c)};return e.resolve=function(e){var f=e.charAt(0);if("/"==f)return e.slice(1);if("."==f)return a.normalize(d,e);var g=b.split("/"),h=c(g,"deps")+1;return h||(h=0),e=g.slice(0,h+1).join("/")+"/deps/"+e},e.exists=function(b){return a.modules.hasOwnProperty(e.resolve(b))},e};var b=this;b.require="undefined"!=typeof b.require?b.require:a,function(){b.require.register("list-widgets/src/class/ChartWidget.js",function(a,b,c){var d,e,f,g,h,i,j,k=function(a,b){return function(){return a.apply(b,arguments)}},l={}.hasOwnProperty,m=function(a,b){function c(){this.constructor=a}for(var d in b)l.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};j=b("../deps"),i=j._,d=j.$,g=b("./InterMineWidget"),e=b("./views/ChartView"),h=b("../utils/type"),f=function(a){function c(a,b,d,e,f,g,h){this.imjs=a,this.service=b,this.token=d,this.id=e,this.bagName=f,this.el=g,null==h&&(h={}),this.render=k(this.render,this),this.widgetOptions=i.extend({},this.widgetOptions,h),this.log=[],c.__super__.constructor.apply(this,arguments),this.render()}return m(c,a),c.prototype.widgetOptions={title:!0,description:!0,matchCb:!1,resultsCb:!1,listCb:!1},c.prototype.formOptions={},c.prototype.spec={response:{chartType:h.isString,description:h.isString,error:h.isNull,list:h.isString,notAnalysed:h.isInteger,pathQuery:h.isString,requestedAt:h.isString,results:h.isArray,seriesLabels:h.isString,seriesValues:h.isString,statusCode:h.isHTTPSuccess,title:h.isString,type:h.isString,wasSuccessful:h.isBoolean,filters:h.isString,filterLabel:h.isString,filterSelectedValue:h.isString,simplePathQuery:h.isString,domainLabel:h.isString,rangeLabel:h.isString}},c.prototype.render=function(){var a,c,f,g,h,i,j=this;f=window.setTimeout(function(){return d(j.el).append(j.loading=d(b("../templates/loading")()))},400),null!=(h=this.view)&&h.undelegateEvents(),a={widget:this.id,list:this.bagName,token:this.token},i=this.formOptions;for(c in i)g=i[c],"errorCorrection"!==c&&"pValue"!==c&&(a.filter=g);return this.log.push("Sending data payload "+JSON.stringify(a)),d.ajax({url:""+this.service+"list/chart",dataType:"jsonp",data:a,success:function(a){var b;return j.log.push("Received a response "+JSON.stringify(a)),window.clearTimeout(f),null!=(b=j.loading)&&b.remove(),j.validateType(a,j.spec.response),a.wasSuccessful?(j.name=a.title,j.log.push("Creating new ChartView"),j.view=new e({widget:j,el:j.el,response:a,form:{options:j.formOptions},options:j.widgetOptions})):void 0},error:function(a,b,c){return clearTimeout(f),j.error({text:""+j.service+"list/chart"},"AJAXTransport")}})},c}(g),c.exports=f}),b.require.register("list-widgets/src/class/EnrichmentWidget.js",function(a,b,c){var d,e,f,g,h,i,j,k=function(a,b){return function(){return a.apply(b,arguments)}},l={}.hasOwnProperty,m=function(a,b){function c(){this.constructor=a}for(var d in b)l.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},n=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};j=b("../deps"),i=j._,d=j.$,g=b("./InterMineWidget"),e=b("./views/EnrichmentView"),h=b("../utils/type"),f=function(a){function c(a,b,d,e,f,g,h,j){var l,m,o,p,q,r;this.imjs=a,this.service=b,this.token=d,this.lists=e,this.id=f,this.bagName=g,this.el=h,null==j&&(j={}),this.render=k(this.render,this),l=["errorCorrection","pValue"],m={};for(o in j)p=j[o],n.call(l,o)>=0&&(m[o]=p);for(q=0,r=l.length;r>q;q++)o=l[q],delete j[o];this.widgetOptions=i.extend({},this.widgetOptions,j),this.formOptions=i.extend({},this.formOptions,m),this.log=[],c.__super__.constructor.apply(this,arguments),this.render()}return m(c,a),c.prototype.widgetOptions={title:!0,description:!0,matchCb:!1,resultsCb:!1,listCb:!1},c.prototype.formOptions={errorCorrection:"Holm-Bonferroni",pValue:"0.05"},c.prototype.errorCorrections=["Holm-Bonferroni","Benjamini Hochberg","Bonferroni","None"],c.prototype.pValues=["0.05","0.10","1.00"],c.prototype.spec={response:{title:h.isString,description:h.isString,pathQuery:h.isJSON,pathConstraint:h.isString,error:h.isNull,list:h.isString,notAnalysed:h.isInteger,requestedAt:h.isString,results:h.isArray,label:h.isString,statusCode:h.isHTTPSuccess,type:h.isString,wasSuccessful:h.isBoolean,filters:h.isString,filterLabel:h.isString,filterSelectedValue:h.isString,externalLink:h.isString,pathQueryForMatches:h.isString,is_logged:h.isBoolean,current_population:h.isStringOrNull,message:h.isString,extraAttribute:h.isStringOrNull}},c.prototype.render=function(){var a,c,f,g,h,i,j=this;f=window.setTimeout(function(){return d(j.el).append(j.loading=d(b("../templates/loading")()))},400),null!=(h=this.view)&&h.undelegateEvents(),a={widget:this.id,list:this.bagName,correction:this.formOptions.errorCorrection,maxp:this.formOptions.pValue,token:this.token},i=this.formOptions;for(c in i)g=i[c],"errorCorrection"!==c&&"pValue"!==c&&"current_population"!==c&&"remember_population"!==c&&"gene_length_correction"!==c&&(c="filter"),a[c]=g;return this.log.push("Sending data payload "+JSON.stringify(a)),d.ajax({url:""+this.service+"list/enrichment",dataType:"jsonp",data:a,success:function(a){var b,c,d;return j.log.push("Received a response "+JSON.stringify(a)),window.clearTimeout(f),null!=(d=j.loading)&&d.remove(),j.validateType(a,j.spec.response),a.wasSuccessful?(j.name=a.title,c=function(){var c,d,e,f;for(e=this.lists,f=[],c=0,d=e.length;d>c;c++)b=e[c],b.type===a.type&&0!==b.size&&f.push(b);return f}.call(j),j.log.push("Creating new EnrichmentView"),j.view=new e({widget:j,el:j.el,template:j.template,response:a,form:{options:j.formOptions,pValues:j.pValues,errorCorrections:j.errorCorrections},options:j.widgetOptions,lists:c})):void 0},error:function(a,b,c){return clearTimeout(f),j.error({text:""+j.service+"list/enrichment"},"AJAXTransport")}})},c}(g),c.exports=f}),b.require.register("list-widgets/src/class/InterMineWidget.js",function(a,b,c){var d,e,f,g,h=function(a,b){return function(){return a.apply(b,arguments)}};g=b("../deps"),d=g.$,f=g.intermine,e=function(){function a(){this.queryRows=h(this.queryRows,this),this.error=h(this.error,this),this.validateType=h(this.validateType,this);var a=this;this.log=this.log||[],this.log.push("Creating wrapping element"),d(this.el).html(d("<div/>",{"class":"inner",style:"height:572px;overflow:hidden;position:relative"})),this.el=d(this.el).find("div.inner"),this.log.push("Monitoring for debug mode"),d(window).on("hashchange",function(){return"#debug"===window.location.hash?d(a.el).append(d("<a/>",{"class":"btn btn-small btn-warning",text:"Debug",style:"z-index:5;position:absolute;display:block;top:0;left:0",click:function(){var b;return b=d("<pre/>",{html:a.log.join("\n\n")}),d(a.el).css("overflow","scroll").html(b)}})):void 0})}return a.prototype.validateType=function(a,c){var d,e,f,g;this.log.push("Validating "+JSON.stringify(a)),d=[];for(e in a)g=a[e],f="function"==typeof c[e]?new c[e](g):void 0,f&&!f.is()&&d.push(b("../templates/invalidjsonkey")({actual:f.is(),expected:new String(f),key:e}));return d.length?this.error(d,"JSONResponse"):void 0},a.prototype.error=function(a,c){switch(null==a&&(a={title:"Error",text:"Generic error"}),a.name=this.name||this.id,c){case"AJAXTransport":a.title="AJAX Request Failed";break;case"JSONResponse":a.title="Invalid JSON Response",a.text="<ol>"+a.join("")+"</ol>"}return d(this.el).html(b("../templates/error")(a)),this.log.push(a.title),this.fireEvent({event:"error",type:c,message:a.title})},a.prototype.fireEvent=function(a){var b,c,d;b=document.createEvent("Events"),b.initEvent("InterMine",!0,!0);for(c in a)d=a[c],b[c]=d;return b.source="ListWidgets",b.widget={id:this.id,bag:this.bagName,el:this.el,service:this.service},window.dispatchEvent(b)},a.prototype.queryRows=function(a,b){return this.log.push("Querying for rows"),this.imjs.rows(a).then(function(a){return b(a)()})},a}(),c.exports=e}),b.require.register("list-widgets/src/class/TableWidget.js",function(a,b,c){var d,e,f,g,h,i,j,k=function(a,b){return function(){return a.apply(b,arguments)}},l={}.hasOwnProperty,m=function(a,b){function c(){this.constructor=a}for(var d in b)l.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};j=b("../deps"),i=j._,d=j.$,e=b("./InterMineWidget"),f=b("./views/TableView"),h=b("../utils/type"),g=function(a){function c(a,b,d,e,f,g,h){this.imjs=a,this.service=b,this.token=d,this.id=e,this.bagName=f,this.el=g,null==h&&(h={}),this.render=k(this.render,this),this.widgetOptions=i.extend({},this.widgetOptions,h),this.log=[],c.__super__.constructor.apply(this,arguments),this.render()}return m(c,a),c.prototype.widgetOptions={title:!0,description:!0,matchCb:!1,resultsCb:!1,listCb:!1},c.prototype.spec={response:{columnTitle:h.isString,title:h.isString,description:h.isString,pathQuery:h.isString,columns:h.isString,pathConstraint:h.isString,requestedAt:h.isString,list:h.isString,type:h.isString,notAnalysed:h.isInteger,results:h.isArray,wasSuccessful:h.isBoolean,error:h.isNull,statusCode:h.isHTTPSuccess}},c.prototype.render=function(){var a,c,e,g=this;return c=window.setTimeout(function(){return d(g.el).append(g.loading=d(b("../templates/loading")()))},400),null!=(e=this.view)&&e.undelegateEvents(),a={widget:this.id,list:this.bagName,token:this.token},this.log.push("Sending data payload "+JSON.stringify(a)),d.ajax({url:""+this.service+"list/table",dataType:"jsonp",data:a,success:function(a){var b;return g.log.push("Received a response "+JSON.stringify(a)),window.clearTimeout(c),null!=(b=g.loading)&&b.remove(),g.validateType(a,g.spec.response),a.wasSuccessful?(g.name=a.title,g.log.push("Creating new TableView"),g.view=new f({widget:g,el:g.el,response:a,options:g.widgetOptions})):void 0},error:function(a,b,d){return clearTimeout(c),g.error({text:""+g.service+"list/table"},"AJAXTransport")}})},c}(e),c.exports=g}),b.require.register("list-widgets/src/class/models/CoreModel.js",function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=function(a,b){return function(){return a.apply(b,arguments)}},u={}.hasOwnProperty,v=function(a,b){function c(){this.constructor=a}for(var d in b)u.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};m=b("../../deps"),l=m._,d=m.Backbone,k=b("../../utils/type"),f=function(a){function b(){return this.toggleSelected=t(this.toggleSelected,this),this.validate=t(this.validate,this),n=b.__super__.constructor.apply(this,arguments)}return v(b,a),b.prototype.defaults={selected:!1},b.prototype.initialize=function(a,b){return this.widget=b,this.validate(a)},b.prototype.validate=function(a){return this.widget.validateType(a,this.spec)},b.prototype.toggleSelected=function(){return this.set({selected:!this.get("selected")})},b}(d.Model),e=function(a){function b(){return o=b.__super__.constructor.apply(this,arguments)}return v(b,a),b.prototype.model=f,b.prototype.selected=function(){return this.filter(function(a){return a.get("selected")})},b.prototype.toggleSelected=function(){var a,b,c,d,e,f,g,h,i;if(this.models.length-this.selected().length){for(f=this.models,h=[],b=0,d=f.length;d>b;b++)a=f[b],h.push(a.set({selected:!0},{silent:!0}));return h}for(g=this.models,i=[],c=0,e=g.length;e>c;c++)a=g[c],i.push(a.set({selected:!1},{silent:!0}));return i},b}(d.Collection),h=function(a){function b(){return p=b.__super__.constructor.apply(this,arguments)}return v(b,a),b.prototype.spec={description:k.isString,identifier:k.isString,matches:k.isInteger,"p-value":k.isInteger,selected:k.isBoolean,externalLink:k.isString},b.prototype.toJSON=function(){var a;return a=l.clone(this.attributes),a["p-value"]<.001?a["p-value"]=a["p-value"].toExponential(6):a["p-value"]=a["p-value"].toFixed(6),a},b}(f),g=function(a){function b(){return q=b.__super__.constructor.apply(this,arguments)}return v(b,a),b.prototype.model=h,b}(e),j=function(a){function b(){return r=b.__super__.constructor.apply(this,arguments)}return v(b,a),b.prototype.spec={matches:k.isInteger,identifier:k.isInteger,descriptions:k.isArray,selected:k.isBoolean},b}(f),i=function(a){function b(){return s=b.__super__.constructor.apply(this,arguments)}return v(b,a),b.prototype.model=j,b}(e),c.exports={EnrichmentRow:h,EnrichmentResults:g,TableRow:j,TableResults:i}}),b.require.register("list-widgets/src/class/views/ChartPopoverView.js",function(a,b,c){var d,e,f,g,h,i,j=function(a,b){return function(){return a.apply(b,arguments)}},k={}.hasOwnProperty,l=function(a,b){function c(){this.constructor=a}for(var d in b)k.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=b("../../deps"),g=h._,d=h.$,e=h.Backbone,f=function(a){function c(){return this.close=j(this.close,this),this.listAction=j(this.listAction,this),this.resultsAction=j(this.resultsAction,this),this.matchAction=j(this.matchAction,this),this.renderValues=j(this.renderValues,this),this.render=j(this.render,this),i=c.__super__.constructor.apply(this,arguments)}return l(c,a),c.prototype.descriptionLimit=50,c.prototype.valuesLimit=5,c.prototype.events={"click a.match":"matchAction","click a.results":"resultsAction","click a.list":"listAction","click a.close":"close"},c.prototype.initialize=function(a){var b,c;for(b in a)c=a[b],this[b]=c;return this.render()},c.prototype.render=function(){return d(this.el).html(b("../../templates/popover/popover")({description:this.description,descriptionLimit:this.descriptionLimit,style:"width:300px",can:{list:this.widget.token&&this.listCb,results:this.resultsCb}})),this.widget.queryRows(this.quickPq,this.renderValues),this},c.prototype.renderValues=function(a){var c,e,f,h;for(e=[],f=0,h=a.length;h>f;f++)c=a[f],e.push(function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)if(b=a[c],b&&b.length>0)return b}(c));return d(this.el).find("div.values").html(b("../../templates/popover/popover.values")({values:e,type:this.type,valuesLimit:this.valuesLimit,size:g.uniq(e).length,can:{match:this.matchCb}}))},c.prototype.matchAction=function(a){return this.matchCb(d(a.target).text(),this.type),a.preventDefault()},c.prototype.resultsAction=function(){return this.resultsCb(this.resultsPq)},c.prototype.listAction=function(){return this.listCb(this.resultsPq)},c.prototype.close=function(){return d(this.el).remove()},c}(e.View),c.exports=f}),b.require.register("list-widgets/src/class/views/ChartView.js",function(a,b,c){var d,e,f,g,h,i,j=function(a,b){return function(){return a.apply(b,arguments)}},k={}.hasOwnProperty,l=function(a,b){function c(){this.constructor=a}for(var d in b)k.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=b("../../deps"),d=h.$,e=h.Backbone,f=b("./ChartPopoverView"),g=function(a){function c(){return this.formAction=j(this.formAction,this),this.viewSeriesAction=j(this.viewSeriesAction,this),this.viewAllAction=j(this.viewAllAction,this),this.viewBarsAction=j(this.viewBarsAction,this),this.viewBarAction=j(this.viewBarAction,this),this.keypressAction=j(this.keypressAction,this),this.renderToolbar=j(this.renderToolbar,this),i=c.__super__.constructor.apply(this,arguments)}return l(c,a),c.prototype.chartOptions={fontName:"Sans-Serif",fontSize:11,colors:["#2F72FF","#9FC0FF"],legend:{position:"top"},chartArea:{top:30,bottom:80,left:50},hAxis:{titleTextStyle:{fontName:"Sans-Serif"}},vAxis:{titleTextStyle:{fontName:"Sans-Serif"}}},c.prototype.brewer={3:["rgb(189,215,231)","rgb(107,174,214)","rgb(33,113,181)"],4:["rgb(189,215,231)","rgb(107,174,214)","rgb(49,130,189)","rgb(8,81,156)"],5:["rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(49,130,189)","rgb(8,81,156)"],6:["rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(66,146,198)","rgb(33,113,181)","rgb(8,69,148)"],7:["rgb(222,235,247)","rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(66,146,198)","rgb(33,113,181)","rgb(8,69,148)"],8:["rgb(222,235,247)","rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(66,146,198)","rgb(33,113,181)","rgb(8,81,156)","rgb(8,48,107)"]},c.prototype.multiselect=!1,c.prototype.events={"change div.form select":"formAction","click div.actions a.view-all":"viewAllAction"},c.prototype.initialize=function(a){var b,c;for(b in a)c=a[b],this[b]=c;return d(document).on("keyup keydown",this.keypressAction),this.render()},c.prototype.render=function(){var a,c,e,f,g,h=this;return d(this.el).html(b("../../templates/chart/chart")({title:this.options.title?this.response.title:"",description:this.options.description?this.response.description:"",notAnalysed:this.response.notAnalysed,type:this.response.type})),null!=this.response.filterLabel&&d(this.el).find("div.form form").append(b("../../templates/extra")({label:this.response.filterLabel,possible:this.response.filters.split(","),selected:this.response.filterSelectedValue})),this.response.results.length>1?this.response.chartType in google.visualization?(this.renderToolbar(),g=d(this.el).width(),c=d(this.el).height()-d(this.el).find("div.header").height(),this.chartOptions.width=g,this.chartOptions.chartArea.width=g-this.chartOptions.chartArea.left,this.chartOptions.height=c,this.chartOptions.chartArea.height=c-this.chartOptions.chartArea.top-this.chartOptions.chartArea.bottom,this.chartOptions.hAxis={title:"BarChart"===this.response.chartType?this.response.rangeLabel:this.response.domainLabel},this.chartOptions.vAxis={title:"BarChart"===this.response.chartType?this.response.domainLabel:this.response.rangeLabel},a=new google.visualization[this.response.chartType](d(this.el).find("div.content")[0]),google.visualization.events.addListener(a,"click",function(){var a;return d(h.el).find(".content").prepend(a=d("<input/>",{"class":"focus",type:"text"})),a.focus().remove()}),null!=this.response.pathQuery&&google.visualization.events.addListener(a,"select",function(){return h.viewBarAction(a)}),1===this.response.results[0].length&&(this.response.results[0]=[this.response.domainLabel,this.response.results[0][0]]),f=JSON.parse(JSON.stringify(this.chartOptions)),"PieChart"===this.response.chartType&&(e=this.response.results.length-1)>=3&&(e>8&&(e=8),f.colors=this.brewer[e].reverse()),a.draw(google.visualization.arrayToDataTable(this.response.results,!1),f)):this.error({title:this.response.chartType,text:"This chart type does not exist in Google Visualization API"}):d(this.el).find("div.content").html(d(b("../../templates/noresults")({text:'No "'+this.response.title+'" with your list.'}))),this.widget.fireEvent({"class":"ChartView",event:"rendered"}),this},c.prototype.renderToolbar=function(){return d(this.el).find("div.actions").html(b("../../templates/chart/chart.actions")({can:{results:this.resultsCb}}))},c.prototype.translate=function(a,b){return null!=a.seriesValues?a.seriesValues.split(",")[a.seriesLabels.split(",").indexOf(b)]:void 0},c.prototype.keypressAction=function(a){if("keydown"===a.type){if(a.keyCode>=16&&a.keyCode<=18)return this.multiselect=!0}else if(a.keyCode>=16&&a.keyCode<=18&&(this.multiselect=!1,null!=this.selection&&0!==this.selection.length))return this.viewBarsAction(this.selection),this.selection=null},c.prototype.viewBarAction=function(a){var b,c,e,g,h,i;if(null!=this.barView&&this.barView.close(),i=a.getSelection()[0],this.multiselect)return null==this.selection&&(this.selection=[]),this.selection.push(i);if(i){if(c="",g=this.response.pathQuery,e=this.response.simplePathQuery,null!=i.row){if(h=this.response.results[i.row+1][0],c+=h,g=g.replace("%category",h),e=e.replace("%category",h),null!=i.column){if("ActualExpectedCriteria"===this.response.seriesPath&&2===i.column)return!1;b=this.response.results[0][i.column],c+=" "+b,g=g.replace("%series",this.translate(this.response,b)),e=g.replace("%series",this.translate(this.response,b))}}else if(null!=i.column)return this.viewSeriesAction(g.replace("%series",this.translate(this.response,this.response.results[0][i.column])));if(g=JSON.parse(g),e=JSON.parse(e),c)return d(this.el).find("div.content").append((this.barView=new f({description:c,resultsPq:g,resultsCb:this.options.resultsCb,listCb:this.options.listCb,matchCb:this.options.matchCb,quickPq:e,widget:this.widget,type:this.response.type})).el)}},c.prototype.viewBarsAction=function(a){var b,c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;n=JSON.parse(this.response.pathQuery),s=n.where;for(l in s)switch(j=s[l],j.value){case"%category":f=j;break;case"%series":p=j;break;default:j.code="A",e=j}for(n.where=[e,f,p],n.constraintLogic="",m=[],g=66,i=[e],k=function(a){var b,c,d;for(c=0,d=i.length;d>c;c++)if(b=i[c],b.path===a.path&&b.value===a.value)return b.code},q=0,r=a.length;r>q;q++)o=a[q],null!=o&&null!=f&&(h=d.extend(!0,{},f,{value:this.response.results[o.row+1][0]}),b=k(h),null==b&&(h.code=b=String.fromCharCode(g++).toUpperCase(),i.push(h)),null!=o.column&&null!=p?(h=d.extend(!0,{},p,{value:this.translate(this.response,this.response.results[0][o.column])}),c=k(h),null==c&&(h.code=c=String.fromCharCode(g++).toUpperCase(),i.push(h)),m.push("("+[b,c].join(" AND ")+")")):m.push(b));if(g>90)throw"Too many constraints";return n.constraintLogic=["A","("+m.join(" OR ")+")"].join(" AND "),n.where=i,g>66&&this.options.resultsCb?this.options.resultsCb(n):void 0},c.prototype.viewAllAction=function(){var a,b,c,d,e,f,g,h;for(c=JSON.parse(this.response.pathQuery),g=["%category","%series"],e=0,f=g.length;f>e;e++){d=g[e],h=c.where;for(b in h)if(a=h[b],(null!=a?a.value:void 0)===d){c.where.splice(b,1);break}}return this.options.resultsCb(c)},c.prototype.viewSeriesAction=function(a){var b,c,d,e;if(this.options.resultsCb){d=JSON.parse(a),e=d.where;for(c in e)if(b=e[c],"%category"===(null!=b?b.value:void 0)){d.where.splice(c,1);break}return this.options.resultsCb(d)}},c.prototype.formAction=function(a){return this.widget.formOptions[d(a.target).attr("name")]=d(a.target[a.target.selectedIndex]).attr("value"),this.widget.render()},c}(e.View),c.exports=g}),b.require.register("list-widgets/src/class/views/EnrichmentLengthCorrectionView.js",function(a,b,c){var d,e,f,g,h,i=function(a,b){return function(){return a.apply(b,arguments)}},j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};g=b("../../deps"),d=g.$,e=g.Backbone,f=function(a){function c(){return this.seeWhich=i(this.seeWhich,this),this.toggleCull=i(this.toggleCull,this),this.hideHelp=i(this.hideHelp,this),this.showHelp=i(this.showHelp,this),this.render=i(this.render,this),h=c.__super__.constructor.apply(this,arguments)}return k(c,a),c.prototype.help="Depending on the type of experiment your data comes from, it is sometimes \nnecessary to normalize by gene length in order to get the correct p-values. \nIf your data comes from a genome-wide binding experiment such as ChIP-seq \nor DamID, binding intervals are more likely to be associated with longer \ngenes than shorter ones, and you should therefore normalize by gene length. \nThis is not the case for experiments such as gene expression studies, where \ngene length does not play a role in the likelihood that a particular set of \ngenes will be overrepresented in the list.",c.prototype.events={"click .correction a.correction":"toggleCull","click .correction a.which":"seeWhich","mouseover .correction label .badge":"showHelp","click .correction a.close":"hideHelp"},c.prototype.initialize=function(a){var b,c;for(b in a)c=a[b],this[b]=c;return null!=this.gene_length_correction?this.render():void 0},c.prototype.render=function(){return d(this.el).append(b("../../templates/enrichment/enrichment.correction")(this)),this},c.prototype.showHelp=function(){return d(this.el).find(".hjalp").html(b("../../templates/popover/popover.help")({title:'What does "Normalise by length" mean?',text:this.help}))},c.prototype.hideHelp=function(){return d(this.el).find(".hjalp").empty()},c.prototype.toggleCull=function(a){var b;return(b=d(a.target)).toggleClass("active"),this.widget.widget.formOptions.gene_length_correction=b.hasClass("active"),this.widget.widget.render()},c.prototype.seeWhich=function(a){var b;return b=JSON.parse(this.pathQueryGeneLengthNull),this.cb(b),a.preventDefault()},c}(e.View),c.exports=f}),b.require.register("list-widgets/src/class/views/EnrichmentPopoverView.js",function(a,b,c){var d,e,f,g,h,i=function(a,b){return function(){return a.apply(b,arguments)}},j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},l=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};g=b("../../deps"),d=g.$,e=g.Backbone,f=function(a){function c(){return this.listAction=i(this.listAction,this),this.resultsAction=i(this.resultsAction,this),this.matchAction=i(this.matchAction,this),this.getPq=i(this.getPq,this),this.toggle=i(this.toggle,this),this.adjustPopover=i(this.adjustPopover,this),this.renderValues=i(this.renderValues,this),this.render=i(this.render,this),h=c.__super__.constructor.apply(this,arguments)}return k(c,a),c.prototype.descriptionLimit=50,c.prototype.valuesLimit=5,c.prototype.events={"click a.match":"matchAction","click a.results":"resultsAction","click a.list":"listAction","click a.close":"toggle"},c.prototype.initialize=function(a){var b,c;for(b in a)c=a[b],this[b]=c;return this.render()},c.prototype.render=function(){var a;return d(this.el).css({position:"relative"}),d(this.el).html(b("../../templates/popover/popover")({description:this.description,descriptionLimit:this.descriptionLimit,style:this.style||"width:300px;margin-left:-300px",can:{list:this.widget.token&&this.listCb,results:this.resultsCb}})),a=JSON.parse(this.response.pathQueryForMatches),a.where.push({path:this.response.pathConstraint,op:"ONE OF",values:this.identifiers}),this.widget.queryRows(a,this.renderValues),this},c.prototype.renderValues=function(a){var c,e,f,g,h;for(f=[],g=0,h=a.length;h>g;g++)c=a[g],e=function(a){var b,c,d,e;for(e=a.reverse(),c=0,d=e.length;d>c;c++)if(b=e[c],b&&b.length>0)return b}(c),l.call(f,e)<0&&f.push(e);return d(this.el).find("div.values").html(b("../../templates/popover/popover.values")({values:f,type:this.response.type,valuesLimit:this.valuesLimit,size:this.size,can:{match:this.matchCb}})),this.adjustPopover()},c.prototype.adjustPopover=function(){var a=this;return window.setTimeout(function(){var b,c,e,f,g,h,i;return h=d(a.el).closest("div.wrapper"),g=d(a.el).find(".popover"),f=g.closest("td.matches"),f.length?(i=f.closest("div.inner"),e=i.find("div.header"),c=i.find("div.content div.head"),b=f.position().top-e.height()+c.height()+g.outerHeight()-h.height(),b>0?g.css("top",-b):void 0):void 0},0)},c.prototype.toggle=function(){return d(this.el).toggle(),this.adjustPopover()},c.prototype.getPq=function(){var a;return a=this.response.pathQuery,this.pq=JSON.parse(a),this.pq.where.push({path:this.response.pathConstraint,op:"ONE OF",values:this.identifiers})},c.prototype.matchAction=function(a){return this.matchCb(d(a.target).text(),this.response.type),a.preventDefault()},c.prototype.resultsAction=function(){return null==this.pq&&this.getPq(),this.resultsCb(this.pq)},c.prototype.listAction=function(){return null==this.pq&&this.getPq(),this.listCb(this.pq)},c}(e.View),c.exports=f}),b.require.register("list-widgets/src/class/views/EnrichmentPopulationView.js",function(a,b,c){var d,e,f,g,h,i=function(a,b){return function(){return a.apply(b,arguments)}},j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};g=b("../../deps"),d=g.$,e=g.Backbone,f=function(a){function c(){return this.selectListAction=i(this.selectListAction,this),this.filterAction=i(this.filterAction,this),this.toggleAction=i(this.toggleAction,this),this.renderLists=i(this.renderLists,this),this.render=i(this.render,this),h=c.__super__.constructor.apply(this,arguments)}return k(c,a),c.prototype.events={"click .background a.change":"toggleAction","click .background a.close":"toggleAction","keyup .background input.filter":"filterAction","click .background table a":"selectListAction"},c.prototype.initialize=function(a){var b,c;for(b in a)c=a[b],this[b]=c;return this.render()},c.prototype.render=function(){return d(this.el).append(b("../../templates/enrichment/enrichment.population")({current:null!=this.current?this.current:"Default",loggedIn:this.loggedIn})),this.renderLists(this.lists),this},c.prototype.renderLists=function(a){return d(this.el).find("div.values").html(b("../../templates/enrichment/enrichment.populationlist")({lists:a,current:this.current}))},c.prototype.toggleAction=function(){return d(this.el).find("div.popover").toggle()},c.prototype.filterAction=function(a){var b=this;return null!=this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){var c,e,f;return e=d(a.target).val(),e!==b.query?(b.query=e,f=new RegExp(""+e+".*","i"),b.renderLists(function(){var a,b,d,e;for(d=this.lists,e=[],a=0,b=d.length;b>a;a++)c=d[a],c.name.match(f)&&e.push(c);return e}.call(b))):void 0},500)},c.prototype.selectListAction=function(a){var b;return b=d(a.target).text(),a.preventDefault(),this.toggleAction(),this.widget.selectBackgroundList(b,1===d(this.el).find("input.save:checked").length)},c}(e.View),c.exports=f}),b.require.register("list-widgets/src/class/views/EnrichmentRowView.js",function(a,b,c){var d,e,f,g,h,i,j=function(a,b){return function(){return a.apply(b,arguments)}},k={}.hasOwnProperty,l=function(a,b){function c(){this.constructor=a}for(var d in b)k.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=b("../../deps"),d=h.$,e=h.Backbone,f=b("./EnrichmentPopoverView"),g=function(a){function c(){return this.toggleMatchesAction=j(this.toggleMatchesAction,this),this.selectAction=j(this.selectAction,this),this.render=j(this.render,this),i=c.__super__.constructor.apply(this,arguments)}return l(c,a),c.prototype.tagName="tr",c.prototype.events={"click td.check input":"selectAction","click td.matches a.count":"toggleMatchesAction"},c.prototype.initialize=function(a){var b,c;for(b in a)c=a[b],this[b]=c;return this.model.bind("change",this.render),this.render()},c.prototype.render=function(){return d(this.el).html(b("../../templates/enrichment/enrichment.row")({row:this.model.toJSON()})),this},c.prototype.selectAction=function(){return this.model.toggleSelected(),null!=this.popoverView?(d(this.el).find("td.matches a.count").after(this.popoverView.el),this.popoverView.delegateEvents()):void 0},c.prototype.toggleMatchesAction=function(a){return null==this.popoverView?d(this.el).find("td.matches a.count").after((this.popoverView=new f({matches:this.model.get("matches"),identifiers:[this.model.get("identifier")],description:this.model.get("description"),
matchCb:this.callbacks.matchCb,resultsCb:this.callbacks.resultsCb,listCb:this.callbacks.listCb,response:this.response,widget:this.widget,size:d(a.target).text()})).el):this.popoverView.toggle()},c}(e.View),c.exports=g}),b.require.register("list-widgets/src/class/views/EnrichmentView.js",function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=function(a,b){return function(){return a.apply(b,arguments)}},q={}.hasOwnProperty,r=function(a,b){function c(){this.constructor=a}for(var d in b)q.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};n=b("../../deps"),d=n.$,m=n._,e=n.Backbone,k=b("../models/CoreModel"),i=b("./EnrichmentRowView"),g=b("./EnrichmentPopoverView"),h=b("./EnrichmentPopulationView"),f=b("./EnrichmentLengthCorrectionView"),l=b("../../utils/exporter"),j=function(a){function c(){return this.selectBackgroundList=p(this.selectBackgroundList,this),this.viewAction=p(this.viewAction,this),this.exportAction=p(this.exportAction,this),this.selectAllAction=p(this.selectAllAction,this),this.formAction=p(this.formAction,this),this.renderTableBody=p(this.renderTableBody,this),this.renderTable=p(this.renderTable,this),this.renderToolbar=p(this.renderToolbar,this),o=c.__super__.constructor.apply(this,arguments)}return r(c,a),c.prototype.events={"click div.actions a.view":"viewAction","click div.actions a.export":"exportAction","change div.form select":"formAction","click div.content input.check":"selectAllAction"},c.prototype.initialize=function(a){var b,c;for(b in a)c=a[b],this[b]=c;return this.collection=new k.EnrichmentResults,this.collection.bind("change",this.renderToolbar),this.render()},c.prototype.render=function(){var a,c;return d(this.el).html(b("../../templates/enrichment/enrichment")({title:this.options.title?this.response.title:"",description:this.options.description?this.response.description:"",notAnalysed:this.response.notAnalysed,type:this.response.type})),d(this.el).find("div.form").html(b("../../templates/enrichment/enrichment.form")({options:this.form.options,pValues:this.form.pValues,errorCorrections:this.form.errorCorrections})),null!=this.response.filterLabel&&d(this.el).find("div.form form").append(b("../../templates/extra")({label:this.response.filterLabel,possible:this.response.filters.split(","),selected:this.response.filterSelectedValue})),new h({el:d(this.el).find("div.form form"),lists:this.lists,current:this.response.current_population,loggedIn:this.response.is_logged,widget:this}),this.response.extraAttribute&&(a=JSON.parse(this.response.extraAttribute),a.gene_length&&(c=m.extend({},a.gene_length,{el:d(this.el).find("div.form form"),widget:this,cb:this.options.resultsCb}),new f(c))),null!=this.response.current_list?d(this.el).addClass("customBackgroundPopulation"):d(this.el).removeClass("customBackgroundPopulation"),this.response.results.length>0&&null==this.response.message?(this.renderToolbar(),this.renderTable()):d(this.el).find("div.content").html(d(b("../../templates/noresults")({text:this.response.message||"No enrichment found."}))),this.widget.fireEvent({"class":"EnrichmentView",event:"rendered"}),this},c.prototype.renderToolbar=function(){return d(this.el).find("div.actions").html(b("../../templates/actions")())},c.prototype.renderTable=function(){var a,c,e,f,g,h,i=this;for(d(this.el).find("div.content").html(b("../../templates/enrichment/enrichment.table")({label:this.response.label})),e=d(this.el).find("div.content table"),f=function(a){var b,c;return b=i.response.results[a],i.response.externalLink&&(b.externalLink=i.response.externalLink+b.identifier),c=new k.EnrichmentRow(b,i.widget),i.collection.add(c)},c=g=0,h=this.response.results.length;h>=0?h>g:g>h;c=h>=0?++g:--g)f(c);return this.renderTableBody(e),a=d(this.el).height()-d(this.el).find("div.header").height()-d(this.el).find("div.content table thead").height(),d(this.el).find("div.content div.wrapper").css("height",""+a+"px"),d(this.el).find("div.content div.head").css("width",d(this.el).find("div.content table").width()+"px"),e.find("thead th").each(function(a,b){return d(i.el).find("div.content div.head div:eq("+a+")").width(d(b).width())}),e.css({"margin-top":"-"+e.find("thead").height()+"px"})},c.prototype.renderTableBody=function(a){var b,c,d,e,f;for(b=document.createDocumentFragment(),f=this.collection.models,d=0,e=f.length;e>d;d++)c=f[d],b.appendChild(new i({model:c,type:this.response.type,callbacks:{matchCb:this.options.matchCb,resultsCb:this.options.resultsCb,listCb:this.options.listCb},response:this.response,widget:this.widget}).el);return a.find("tbody").html(b)},c.prototype.formAction=function(a){return this.widget.formOptions[d(a.target).attr("name")]=d(a.target[a.target.selectedIndex]).attr("value"),this.widget.render()},c.prototype.selectAllAction=function(){return this.collection.toggleSelected(),this.renderToolbar(),this.renderTableBody(d(this.el).find("div.content table"))},c.prototype.exportAction=function(a){var b,c,e,f,g,h,i=this;for(f=this.collection.selected(),f.length||(f=this.collection.models),e=[],g=0,h=f.length;h>g;g++)b=f[g],e.push(b.get("identifier"));return c=JSON.parse(this.response.pathQueryForMatches),c.where.push({path:this.response.pathConstraint,op:"ONE OF",values:e}),this.widget.queryRows(c,function(c){var e,g,h,j,k,m,n,o,p,q;for(g={},n=0,p=c.length;p>n;n++)h=c[n],null==g[h[0]]&&(g[h[0]]=[]),g[h[0]].push(h[1]);for(j=[],o=0,q=f.length;q>o;o++)b=f[o],m=b.get("identifier")||"n/a",k=g[m]||"N/A - null identifier",Array.isArray(k)&&(k=k.join(",")),j.push([b.get("description"),b.get("p-value")].join("	")+"	"+k+"	"+m);if(j.length)try{return new l.Exporter(j.join("\n"),""+i.widget.bagName+" "+i.widget.id+".tsv")}catch(r){return e=r,new l.PlainExporter(d(a.target),j.join("\n"))}})},c.prototype.viewAction=function(){var a,b,c,e,f,h,i;for(e=this.collection.selected(),e.length||(e=this.collection.models),a=[],c=[],f=0,h=e.length;h>f;f++)b=e[f],a.push(b.get("description")),c.push(b.get("identifier"));return c.length?(null!=(i=this.popoverView)&&i.remove(),d(this.el).find("div.actions").after((this.popoverView=new g({identifiers:c,description:a.join(", "),style:"width:300px",matchCb:this.options.matchCb,resultsCb:this.options.resultsCb,listCb:this.options.listCb,response:this.response,widget:this.widget})).el)):void 0},c.prototype.selectBackgroundList=function(a,b){return null==b&&(b=!1),"Default"===a&&(a=""),this.widget.formOptions.current_population=a,this.widget.formOptions.remember_population=b,this.widget.render()},c}(e.View),c.exports=j}),b.require.register("list-widgets/src/class/views/TablePopoverView.js",function(a,b,c){var d,e,f,g,h,i=function(a,b){return function(){return a.apply(b,arguments)}},j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};g=b("../../deps"),d=g.$,e=g.Backbone,f=function(a){function c(){return this.toggle=i(this.toggle,this),this.adjustPopover=i(this.adjustPopover,this),this.listAction=i(this.listAction,this),this.resultsAction=i(this.resultsAction,this),this.matchAction=i(this.matchAction,this),this.renderValues=i(this.renderValues,this),this.render=i(this.render,this),h=c.__super__.constructor.apply(this,arguments)}return k(c,a),c.prototype.descriptionLimit=50,c.prototype.valuesLimit=5,c.prototype.events={"click a.match":"matchAction","click a.results":"resultsAction","click a.list":"listAction","click a.close":"toggle"},c.prototype.initialize=function(a){var b,c;for(b in a)c=a[b],this[b]=c;return this.render()},c.prototype.render=function(){return d(this.el).css({position:"relative"}),d(this.el).html(b("../../templates/popover/popover")({description:this.description,descriptionLimit:this.descriptionLimit,style:this.style||"width:300px;margin-left:-300px",can:{list:this.widget.token&&this.listCb,results:this.resultsCb}})),this.pathQuery=JSON.parse(this.pathQuery),this.pathQuery.where.push({path:this.pathConstraint,op:"ONE OF",values:this.identifiers}),this.widget.queryRows(this.pathQuery,this.renderValues),this},c.prototype.renderValues=function(a){var c,e,f,g;for(e=[],f=0,g=a.length;g>f;f++)c=a[f],e.push(function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)if(b=a[c],b&&b.length>0)return b}(c));return d(this.el).find("div.values").html(b("../../templates/popover/popover.values")({values:e,type:this.type,valuesLimit:this.valuesLimit,size:this.size,can:{match:this.matchCb}})),this.adjustPopover()},c.prototype.matchAction=function(a){return this.matchCb(d(a.target).text(),this.type),a.preventDefault()},c.prototype.resultsAction=function(){return this.resultsCb(this.pathQuery)},c.prototype.listAction=function(){return this.listCb(this.pathQuery)},c.prototype.adjustPopover=function(){var a=this;return window.setTimeout(function(){var b,c,e,f,g,h,i;return h=d(a.el).closest("div.wrapper"),g=d(a.el).find(".popover"),f=g.closest("td.matches"),f.length?(i=f.closest("div.inner"),e=i.find("div.header"),c=i.find("div.content div.head"),b=f.position().top-e.height()+c.height()+g.outerHeight()-h.height(),b>0?g.css("top",-b):void 0):void 0},0)},c.prototype.toggle=function(){return d(this.el).toggle(),this.adjustPopover()},c}(e.View),c.exports=f}),b.require.register("list-widgets/src/class/views/TableRowView.js",function(a,b,c){var d,e,f,g,h,i,j=function(a,b){return function(){return a.apply(b,arguments)}},k={}.hasOwnProperty,l=function(a,b){function c(){this.constructor=a}for(var d in b)k.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=b("../../deps"),d=h.$,e=h.Backbone,f=b("./TablePopoverView"),g=function(a){function c(){return this.toggleMatchesAction=j(this.toggleMatchesAction,this),this.selectAction=j(this.selectAction,this),this.render=j(this.render,this),i=c.__super__.constructor.apply(this,arguments)}return l(c,a),c.prototype.tagName="tr",c.prototype.events={"click td.check input":"selectAction","click td.matches a.count":"toggleMatchesAction"},c.prototype.initialize=function(a){var b,c;for(b in a)c=a[b],this[b]=c;return this.model.bind("change",this.render),this.render()},c.prototype.render=function(){return d(this.el).html(b("../../templates/table/table.row")({row:this.model.toJSON()})),this},c.prototype.selectAction=function(){return this.model.toggleSelected(),null!=this.popoverView?(d(this.el).find("td.matches a.count").after(this.popoverView.el),this.popoverView.delegateEvents()):void 0},c.prototype.toggleMatchesAction=function(a){return null==this.popoverView?d(this.el).find("td.matches a.count").after((this.popoverView=new f({identifiers:[this.model.get("identifier")],description:this.model.get("descriptions").join(", "),matchCb:this.matchCb,resultsCb:this.resultsCb,listCb:this.listCb,pathQuery:this.response.pathQuery,pathConstraint:this.response.pathConstraint,widget:this.widget,type:this.response.type,size:d(a.target).text()})).el):this.popoverView.toggle()},c}(e.View),c.exports=g}),b.require.register("list-widgets/src/class/views/TableView.js",function(a,b,c){var d,e,f,g,h,i,j,k,l,m=function(a,b){return function(){return a.apply(b,arguments)}},n={}.hasOwnProperty,o=function(a,b){function c(){this.constructor=a}for(var d in b)n.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};k=b("../../deps"),d=k.$,e=k.Backbone,f=b("../models/CoreModel"),h=b("./TableRowView"),g=b("./TablePopoverView"),j=b("../../utils/exporter"),i=function(a){function c(){return this.viewAction=m(this.viewAction,this),this.exportAction=m(this.exportAction,this),this.selectAllAction=m(this.selectAllAction,this),this.renderTableBody=m(this.renderTableBody,this),this.renderTable=m(this.renderTable,this),this.renderToolbar=m(this.renderToolbar,this),l=c.__super__.constructor.apply(this,arguments)}return o(c,a),c.prototype.events={"click div.actions a.view":"viewAction","click div.actions a.export":"exportAction","click div.content input.check":"selectAllAction"},c.prototype.initialize=function(a){var b,c;for(b in a)c=a[b],this[b]=c;return this.collection=new f.TableResults,this.collection.bind("change",this.renderToolbar),this.render()},c.prototype.render=function(){return d(this.el).html(b("../../templates/table/table")({title:this.options.title?this.response.title:"",description:this.options.description?this.response.description:"",notAnalysed:this.response.notAnalysed,type:this.response.type})),this.response.results.length>0?(this.renderToolbar(),this.renderTable()):d(this.el).find("div.content").html(b("../../templates/noresults")({text:'No "'+this.response.title+'" with your list.'})),this.widget.fireEvent({"class":"TableView",event:"rendered"}),this},c.prototype.renderToolbar=function(){return d(this.el).find("div.actions").html(b("../../templates/actions")())},c.prototype.renderTable=function(){var a,c,e,g,h,i,j=this;for(d(this.el).find("div.content").html(b("../../templates/table/table.table")({columns:this.response.columns.split(",")})),e=d(this.el).find("div.content table"),g=function(a){var b;return b=new f.TableRow(j.response.results[a],j.widget),j.collection.add(b)},c=h=0,i=this.response.results.length;i>=0?i>h:h>i;c=i>=0?++h:--h)g(c);return this.renderTableBody(e),a=d(this.el).height()-d(this.el).find("div.header").height()-d(this.el).find("div.content div.head").height(),d(this.el).find("div.content div.wrapper").css("height",""+a+"px"),d(this.el).find("div.content div.head").css("width",d(this.el).find("div.content table").width()+"px"),e.find("thead th").each(function(a,b){return d(j.el).find("div.content div.head div:eq("+a+")").width(d(b).width())}),e.css({"margin-top":"-"+e.find("thead").height()+"px"})},c.prototype.renderTableBody=function(a){var b,c,d,e,f;for(b=document.createDocumentFragment(),f=this.collection.models,d=0,e=f.length;e>d;d++)c=f[d],b.appendChild(new h({model:c,response:this.response,matchCb:this.options.matchCb,resultsCb:this.options.resultsCb,listCb:this.options.listCb,widget:this.widget}).el);return a.find("tbody").html(b)},c.prototype.selectAllAction=function(){return this.collection.toggleSelected(),this.renderToolbar(),this.renderTableBody(d(this.el).find("div.content table"))},c.prototype.exportAction=function(a){var b,c,e,f,g,h;for(f=this.collection.selected(),f.length||(f=this.collection.models),e=[this.response.columns.replace(/,/g,"	")],g=0,h=f.length;h>g;g++)c=f[g],e.push(c.get("descriptions").join("	")+"	"+c.get("matches"));if(e.length)try{return new j.Exporter(e.join("\n"),""+this.widget.bagName+" "+this.widget.id+".tsv")}catch(i){return b=i,new j.PlainExporter(d(a.target),e.join("\n"))}},c.prototype.viewAction=function(){var a,b,c,e,f,h,i;for(e=this.collection.selected(),e.length||(e=this.collection.models),a=[],c=[],f=0,h=e.length;h>f;f++)b=e[f],a.push(b.get("descriptions")[0]),c.push(b.get("identifier"));return c.length?(null!=(i=this.popoverView)&&i.remove(),d(this.el).find("div.actions").after((this.popoverView=new g({identifiers:c,description:a.join(", "),matchCb:this.options.matchCb,resultsCb:this.options.resultsCb,listCb:this.options.listCb,pathQuery:this.response.pathQuery,pathConstraint:this.response.pathConstraint,widget:this.widget,type:this.response.type,style:"width:300px"})).el)):void 0},c}(e.View),c.exports=i}),b.require.register("list-widgets/src/deps.js",function(a,b,c){var d;d=window.jQuery||window.Zepto,c.exports={$:d,_:_,Backbone:Backbone,saveAs:saveAs,google:google,intermine:intermine}}),b.require.register("list-widgets/src/templates/actions.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<a class="btn btn-small view">View</a>\n<a class="btn btn-small export">Download</a>')}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),b.require.register("list-widgets/src/templates/chart/chart.actions.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){this.can.results&&c.push('\n<a class="btn btn-small view-all">View in table</a>\n')}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),b.require.register("list-widgets/src/templates/chart/chart.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div class="header">\n    <h3>'),this.title&&c.push(d(this.title)),c.push("</h3>\n    <p>"),this.description&&c.push(this.description),c.push("</p>\n    "),this.notAnalysed?(c.push("\n        <p>Number of "),c.push(d(this.type)),c.push("s in this list not analysed in this widget: <a>"),c.push(d(this.notAnalysed)),c.push("</a></p>\n    ")):c.push("\n        <p>All items in your list have been analysed.</p>\n    "),c.push('\n\n    <div class="form">\n        <form style="margin:0">\n            <!-- extra.eco -->\n        </form>\n    </div>\n\n    <div class="actions" style="padding:10px 0">\n        <!-- chart.actions.eco -->\n    </div>\n</div>\n<div class="content"></div>')}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),b.require.register("list-widgets/src/templates/enrichment/enrichment.correction.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div class="group correction" style="display:inline-block;margin-right:10px;float:left;height:60px">\n    <label>Normalise by length <em class="badge badge-info" style="font-size:11px;font-family:serif;padding:1px 3px;border-radius:2px">i</em><div class="hjalp" style="padding:0"></div></label>\n\n    '),this.gene_length_correction?c.push('\n        <a class="btn btn-small active correction" style="float:right">Normalised</a>\n    '):c.push('\n        <a class="btn btn-small correction" style="float:right">Normalise</a>\n    '),c.push("\n\n    "),this.percentage_gene_length_not_null&&(c.push("\n    	"),c.push(d(this.percentage_gene_length_not_null)),c.push(' of genes in your list do not have a length and will be discarded, <a class="which" style="cursor:pointer">see which</a>.\n    ')),c.push("\n</div>")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),b.require.register("list-widgets/src/templates/enrichment/enrichment.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div class="header">\n    <h3>'),this.title&&c.push(d(this.title)),c.push("</h3>\n    <p>"),this.description&&c.push(this.description),c.push("</p>\n    "),this.notAnalysed?(c.push("\n        <p>Number of "),c.push(d(this.type)),c.push("s in this list not analysed in this widget: <a>"),c.push(d(this.notAnalysed)),c.push("</a></p>\n    ")):c.push("\n        <p>All items in your list have been analysed.</p>\n    "),c.push('\n\n    <div class="form">\n        <!-- enrichment.form.eco -->\n    </div>\n\n    <div class="actions" style="padding:10px 0">\n        <!-- actions.eco -->\n    </div>\n</div>\n<div class="content">\n    <!-- enrichment.table.eco -->\n</div>')}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),b.require.register("list-widgets/src/templates/enrichment/enrichment.form.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a,b,e,f,g,h,i,j;for(c.push('<form style="margin:0">\n    <div class="group" style="display:inline-block;margin-right:10px;float:left;height:60px">\n        <label>Test Correction</label>\n        <select name="errorCorrection" class="span2">\n            '),i=this.errorCorrections,e=0,g=i.length;g>e;e++)a=i[e],c.push('\n                <option value="'),c.push(d(a)),c.push('" '),this.options.errorCorrection===a&&c.push(d('selected="selected"')),c.push(">\n                    "),c.push(d(a)),c.push("\n            </option>\n            ");for(c.push('\n        </select>\n    </div>\n\n    <div class="group" style="display:inline-block;margin-right:10px;float:left;height:60px">\n        <label>Max p-value</label>\n        <select name="pValue" class="span2">\n            '),j=this.pValues,f=0,h=j.length;h>f;f++)b=j[f],c.push('\n                <option value="'),c.push(d(b)),c.push('" '),parseFloat(this.options.pValue)===parseFloat(b)&&c.push(d('selected="selected"')),c.push(">\n                    "),c.push(d(b)),c.push("\n                </option>\n            ");c.push('\n        </select>\n    </div>\n</form>\n<div style="clear:both"></div>')}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),b.require.register("list-widgets/src/templates/enrichment/enrichment.population.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div class="group background" style="display:inline-block;margin-right:10px;float:left;height:60px">\n    <label>Background population</label>\n    '),c.push(d(this.current)),c.push(' <a class="btn btn-small change">Change</a>\n\n    <div class="popover" style="position:absolute;top:0;right:0;z-index:1;display:none">\n        <div class="popover-inner">\n            <a style="cursor:pointer;margin:2px 5px 0 0" class="close">×</a>\n            <h4 class="popover-title">Change background population</h4>\n            <div class="popover-content">\n                <p style="margin-bottom:5px">\n                    '),this.loggedIn?c.push('\n                        <input type="checkbox" class="save" style="vertical-align:top" /> Save your preference for next time\n                    '):c.push("\n                        Login to save your preference for next time\n                    "),c.push('\n                </p>\n\n                <input type="text" class="filter" style="width:96%" placeholder="Filter..." />\n                \n                <div class="values" style="max-height:300px;overflow-y:auto">\n                    <!-- enrichment.populationlist.eco -->\n                </div>\n            </div>\n        </div>\n    </div>\n</div>')}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),b.require.register("list-widgets/src/templates/enrichment/enrichment.populationlist.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a,b,e,f,g,h,i,j;for(c.push('<table class="table table-striped">\n    <tbody>\n        <tr><td>\n            '),null==this.current?c.push('\n                <strong><a href="#">Default</a></strong>\n            '):c.push('\n                <a href="#">Default</a>\n            '),c.push("\n        </td></tr>\n        "),i=this.lists,e=0,g=i.length;g>e;e++){for(a=i[e],c.push("\n            <tr><td>\n                "),a.name===this.current?(c.push("\n                    <strong>\n                        <a "),a.description&&(c.push('title="'),c.push(d(a.description)),c.push('"')),c.push(' href="#">'),c.push(d(a.name)),c.push("</a> ("),c.push(d(a.size)),c.push(")\n                    </strong>\n                ")):(c.push("\n                    <a "),a.description&&(c.push('title="'),c.push(d(a.description)),c.push('"')),c.push(' href="#">'),c.push(d(a.name)),c.push("</a> ("),c.push(d(a.size)),c.push(")\n                ")),c.push("\n                \n                "),j=a.tags,f=0,h=j.length;h>f;f++)b=j[f],c.push('\n                    <span class="label" style="vertical-align:text-bottom">'),c.push(d(b)),c.push("</span>\n                ");c.push("\n            </td></tr>\n        ")}c.push("\n    </tbody>\n</table>")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),b.require.register("list-widgets/src/templates/enrichment/enrichment.row.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<td class="check"><input type="checkbox" '),this.row.selected&&c.push('checked="checked"'),c.push(' /></td>\n<td class="description">\n    '),c.push(d(this.row.description)),c.push("\n    "),this.row.externalLink&&(c.push('\n        [<a href="'),c.push(this.row.externalLink),c.push('" target="_blank">'),c.push(d(this.row.identifier)),c.push("</a>]\n    ")),c.push('\n</td>\n<td class="pValue" style="white-space:nowrap">'),c.push(d(this.row["p-value"])),c.push('</td>\n<td class="matches">\n    <a class="count" style="cursor:pointer">'),c.push(d(this.row.matches)),c.push("</a>\n</td>")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),b.require.register("list-widgets/src/templates/enrichment/enrichment.table.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<!-- actual fixed head -->\n<div class="head" style="display:table">\n    <div style="font-weight:bold;display:table-cell;padding:0 8px;"><input type="checkbox" class="check" /></div>\n    <div style="font-weight:bold;display:table-cell;padding:0 8px;">'),c.push(d(this.label)),c.push('</div>\n    <div style="font-weight:bold;display:table-cell;padding:0 8px;white-space:nowrap">p-Value <a href="http://intermine.readthedocs.org/en/latest/embedding/list-widgets/enrichment-widgets/" target="_blank" class="badge badge-info" style="font-size:11px;font-family:serif;padding:1px 3px;border-radius:2px;font-style:italic;color:#FFF!important">i</a></div>\n    <div style="font-weight:bold;display:table-cell;padding:0 8px;">Matches</div>\n    <div style="clear:both"></div>\n</div>\n<div class="wrapper" style="overflow:auto;overflow-x:hidden">\n    <table class="table table-striped">\n        <!-- head for proper cell width -->\n        <thead style="visibility:hidden">\n            <tr>\n                <th></th>\n                <th>'),c.push(d(this.label)),c.push("</th>\n                <th>p-Value</th>\n                <th>Matches</th>\n            </tr>\n        </thead>\n        <tbody>\n            <!-- loop enrichment.row.eco -->\n        </tbody>\n    </table>\n</div>")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),b.require.register("list-widgets/src/templates/error.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div class="alert alert-block">\n    <h4 class="alert-heading">'),c.push(d(this.title)),c.push(" for "),c.push(d(this.name)),c.push("</h4>\n    <p>"),c.push(this.text),c.push("</p>\n</div>")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),b.require.register("list-widgets/src/templates/extra.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a,b,e,f;if(c.push('<div class="group" style="display:inline-block;margin-right:5px;float:left">\n    <label>'),c.push(d(this.label)),c.push("</label>\n    "),this.possible.length>1){for(c.push('\n        <select name="'),c.push(d(this.label)),c.push('" class="span2">\n            '),f=this.possible,b=0,e=f.length;e>b;b++)a=f[b],c.push('\n                <option value="'),c.push(d(a)),c.push('" '),this.selected===a&&c.push(d('selected="selected"')),c.push(">\n                    "),c.push(d(a)),c.push("\n                </option>\n            ");c.push("\n        </select>\n    ")}else c.push("\n        "),c.push(d(this.possible[0])),c.push("\n    ");c.push('\n</div>\n<div style="clear:both"></div>')}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),b.require.register("list-widgets/src/templates/invalidjsonkey.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<li style="vertical-align:bottom">\n    <span style="display:inline-block" class="label label-important">'),c.push(d(this.key)),c.push("</span> is "),c.push(d(this.actual)),c.push("; was expecting "),c.push(d(this.expected)),c.push("\n</li>")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),b.require.register("list-widgets/src/templates/loading.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;
("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div class="loading" style="background:rgba(255,255,255,0.9);position:absolute;top:0;left:0;height:100%;width:100%;text-align:center;">\n    <p style="padding-top:50%;font-weight:bold;">Loading &hellip;</p>\n</div>')}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),b.require.register("list-widgets/src/templates/noresults.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div class="alert alert-info">\n    <p>'),c.push(d(this.text||"The Widget has no results.")),c.push("</p>\n</div>")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),b.require.register("list-widgets/src/templates/popover/popover.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div class="popover" style="position:absolute;top:5px;right:0;z-index:1;display:block">\n    <div class="popover-inner" style="'),c.push(d(this.style)),c.push('">\n        <a style="cursor:pointer;margin:2px 5px 0 0" class="close">×</a>\n        <h3 class="popover-title">\n            '),c.push(d(this.description.slice(0,this.descriptionLimit-1+1||9e9))),c.push("\n            "),this.description.length>this.descriptionLimit&&c.push("&hellip;"),c.push('\n        </h3>\n        <div class="popover-content">\n            <div class="values">\n                Loading &hellip;\n                <!-- popover.values.eco -->\n            </div>\n            <div style="margin-top:10px">\n                '),this.can.results&&c.push('\n                <a class="btn btn-small btn-primary results">View results</a>\n                '),c.push("\n                "),this.can.list&&c.push('\n                <a class="btn btn-small list">Create list</a>\n                '),c.push("\n            </div>\n        </div>\n    </div>\n</div>")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),b.require.register("list-widgets/src/templates/popover/popover.help.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div class="popover" style="position:absolute;top:5px;right:0;z-index:1;display: block;">\n    <div class="popover-inner">\n        <a style="cursor:pointer;margin:2px 5px 0 0" class="close">×</a>\n        <h3 class="popover-title">'),c.push(d(this.title)),c.push('</h3>\n        <div class="popover-content">\n            <p>'),c.push(d(this.text)),c.push("</p>\n        </div>\n    </div>\n</div>")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),b.require.register("list-widgets/src/templates/popover/popover.values.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a,b,e,f;for(c.push("<h4>"),c.push(d(this.size)),c.push(" "),c.push(d(this.type)),1!==parseInt(this.size)&&c.push(d("s")),c.push(":</h4>\n\n"),f=this.values.slice(0,this.valuesLimit-1+1||9e9),b=0,e=f.length;e>b;b++)a=f[b],c.push("\n    "),this.can.match?(c.push('\n        <a href="#" class="match">'),c.push(d(a)),c.push("</a>\n    ")):(c.push("\n        <span>"),c.push(d(a)),c.push("</span>\n    ")),c.push("\n");c.push("\n"),this.values.length>this.valuesLimit&&c.push("&hellip;")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),b.require.register("list-widgets/src/templates/table/table.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div class="header">\n    <h3>'),this.title&&c.push(d(this.title)),c.push("</h3>\n    <p>"),this.description&&c.push(this.description),c.push("</p>\n    "),this.notAnalysed?(c.push("\n        <p>Number of "),c.push(d(this.type)),c.push("s in this list not analysed in this widget: <a>"),c.push(d(this.notAnalysed)),c.push("</a></p>\n    ")):c.push("\n        <p>All items in your list have been analysed.</p>\n    "),c.push('\n\n    <div class="actions" style="padding:10px 0">\n        <!-- actions.eco -->\n    </div>\n</div>\n<div class="content">\n    <!-- table.table.eco -->\n</div>')}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),b.require.register("list-widgets/src/templates/table/table.row.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a,b,e,f;for(c.push('<td class="check"><input type="checkbox" '),this.row.selected&&c.push('checked="checked"'),c.push(" /></td>\n"),f=this.row.descriptions,b=0,e=f.length;e>b;b++)a=f[b],c.push("\n    <td>"),c.push(d(a)),c.push("</td>\n");c.push('\n<td class="matches">\n    <a class="count" style="cursor:pointer">'),c.push(d(this.row.matches)),c.push("</a>\n</td>")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),b.require.register("list-widgets/src/templates/table/table.table.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a,b,e,f,g,h,i;for(c.push('<!-- actual fixed head -->\n<div class="head" style="display:table">\n    <div style="font-weight:bold;display:table-cell;padding:0 8px;"><input type="checkbox" class="check" /></div>\n    '),h=this.columns,b=0,f=h.length;f>b;b++)a=h[b],c.push('\n        <div style="font-weight:bold;display:table-cell;padding:0 8px;">'),c.push(d(a)),c.push("</div>\n    ");for(c.push('\n    <div style="clear:both"></div>\n</div>\n<div class="wrapper" style="overflow:auto;overflow-x:hidden">\n    <table class="table table-striped">\n        <!-- head for proper cell width -->\n        <thead style="visibility:hidden">\n            <tr>\n                <th></th>\n                '),i=this.columns,e=0,g=i.length;g>e;e++)a=i[e],c.push("\n                    <th>"),c.push(d(a)),c.push("</th>\n                ");c.push("\n            </tr>\n        </thead>\n        <tbody>\n            <!-- loop table.row.eco -->\n        </tbody>\n    </table>\n</div>")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),b.require.register("list-widgets/src/utils/exporter.js",function(a,b,c){var d,e,f;f=b("../deps"),d=f.$,e=f.saveAs,a.Exporter=function(){function a(a,b){var c;null==b&&(b="widget.tsv"),c=new Blob([a],{type:""+this.mime+";charset="+this.charset}),e(c,b)}return a.prototype.mime="text/plain",a.prototype.charset="utf-8",a}(),a.PlainExporter=function(){function a(a,b){var c,e,f=this;e=window.open(),null==e||"undefined"==typeof e?a.after(this.msg=d("<span/>",{style:"margin-left:5px","class":"label label-inverse",text:"Please enable popups"})):(e.document.open(),e.document.write("<pre>"+b+"</pre>"),e.document.close()),c=function(){var a;return null!=(a=f.msg)?a.fadeOut():void 0},setTimeout(c,5e3)}return a}()}),b.require.register("list-widgets/src/utils/type.js",function(a,b,c){var d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c.exports=d={},d.Root=function(){function a(){}return a.prototype.result=!1,a.prototype.is=function(){return this.result},a.prototype.toString=function(){return""+this.expected+" but got "+this.actual},a}(),d.isString=function(a){function b(a){this.actual=a,this.result="string"==typeof a}return g(b,a),b.prototype.expected="String",b}(d.Root),d.isStringOrNull=function(a){function b(a){this.actual=a,this.result=null===a||"string"==typeof a}return g(b,a),b.prototype.expected="String or Null",b}(d.Root),d.isInteger=function(a){function b(a){this.actual=a,this.result="number"==typeof a}return g(b,a),b.prototype.expected="Integer",b}(d.Root),d.isBoolean=function(a){function b(a){this.actual=a,this.result="boolean"==typeof a}return g(b,a),b.prototype.expected="Boolean true",b}(d.Root),d.isBooleanOrNull=function(a){function b(a){this.actual=a,this.result=null===a||"boolean"==typeof a}return g(b,a),b.prototype.expected="Boolean or Null",b}(d.Root),d.isNull=function(a){function b(a){this.actual=a,this.result=null===a}return g(b,a),b.prototype.expected="Null",b}(d.Root),d.isArray=function(a){function b(a){this.actual=a,this.result=a instanceof Array}return g(b,a),b.prototype.expected="Array",b}(d.Root),d.isHTTPSuccess=function(a){function b(a){this.actual=a,this.result=200===a}return g(b,a),b.prototype.expected="HTTP code 200",b}(d.Root),d.isJSON=function(a){function b(a){var b;this.actual=a,this.result=!0;try{JSON.parse(a)}catch(c){b=c,this.result=!1}}return g(b,a),b.prototype.expected="JSON Object",b}(d.Root),d.isUndefined=function(a){function b(){return e=b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.expected="it to be undefined",b}(d.Root)}),b.require.register("list-widgets/src/widgets.js",function(a,b,c){var d,e,f,g,h,i,j,k=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};j=b("./deps"),d=j.$,i=j.google,e=b("./class/ChartWidget"),f=b("./class/EnrichmentWidget"),g=b("./class/TableWidget"),h=function(){function a(a,b){var c,d;if("string"==typeof a)this.root=a,this.token=b,c={root:this.root,token:this.token};else if(d=c=a,this.root=d.root,this.token=d.token,!this.root)throw new Error("You need to set the `root` parameter pointing to the mine's service");this.imjs=new intermine.Service(c),this.lists=this.imjs.fetchLists()}return a.prototype.chart=function(a,b,c,d){var f=this;return i.charts.load("current",{packages:["corechart"],callback:function(){var g,h,i;return _.isObject(a)&&(i=a,a=i.id,g=i.bag,b=i.bagName,c=i.el,d=i.widgetOptions,h=i.opts),h&&(d=h),g&&_.isObject(g)&&(b=g.name),new e(f.imjs,f.root,f.token,a,b,c,d)}})},a.prototype.enrichment=function(a,b,c,e){var g=this;return this.lists.then(function(d){var h,i,j;return _.isObject(a)&&(j=a,a=j.id,h=j.bag,b=j.bagName,c=j.el,e=j.widgetOptions,i=j.opts),i&&(e=i),h&&_.isObject(h)&&(b=h.name),new f(g.imjs,g.root,g.token,d,a,b,c,e)},function(a){return d(opts[2]).html(d("<div/>",{"class":"alert alert-error",html:""+errstatusText+" for <a href='"+g.root+"widgets'>"+g.root+"widgets</a>"}))})},a.prototype.table=function(a,b,c,d){var e,f,h;return _.isObject(a)&&(h=a,a=h.id,e=h.bag,b=h.bagName,c=h.el,d=h.widgetOptions,f=h.opts),f&&(d=f),e&&_.isObject(e)&&(b=e.name),new g(this.imjs,this.root,this.token,a,b,c,d)},a.prototype.all=function(a,b,c,e){var f,g,h,i,j,l=this;return null==a&&(a="Gene"),_.isObject(a)&&(j=a,a=j.type,f=j.bag,b=j.bagName,c=j.el,e=j.widgetOptions,h=j.opts),h&&(e=h),g=function(a){return d(c).html(d("<div/>",{"class":"alert alert-error",html:""+a+" for <a href='"+l.root+"widgets'>"+l.root+"widgets</a>"}))},i=function(a,f){var g,h,i,j,m,n;for(n=[],j=0,m=a.length;m>j;j++)h=a[j],k.call(h.targets,f)>=0&&(i=h.name.replace(/[^-a-zA-Z0-9,&\s]+/gi,"").replace(/-/gi,"_").replace(/\s/gi,"-").toLowerCase(),d(c).append(g=d("<div/>",{id:i,"class":"widget span6"})),n.push(l[h.widgetType](h.name,b,g,e)));return n},d.ajax({url:""+this.root+"widgets",dataType:"jsonp",success:function(c){return c.widgets?a?i(c.widgets,a):f&&_.isObject(f)?i(c.widgets,f.type):a?void 0:l.imjs.fetchList(b,function(a,b){return a?g(a):i(c.widgets,b.type)}):g("No widgets have been configured")},error:function(a,b,c){return g(a.statusText)}})},a}(),c.exports=h})}();var c=b.require("list-widgets/src/widgets.js");"undefined"!=typeof define&&define.amd?define("list-widgets",[],function(){return c}):"undefined"!=typeof module&&module.exports?module.exports=c:b["list-widgets"]=c,b.require.alias("list-widgets/src/widgets.js","list-widgets/index.js")}();